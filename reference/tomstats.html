<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>tomstats — tomstats • remstats</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="tomstats — tomstats"><meta name="description" content="Computes statistics for modeling relational event history data
with the tie-oriented relational event model."><meta property="og:description" content="Computes statistics for modeling relational event history data
with the tie-oriented relational event model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">remstats</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other Packages</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-other-packages"><li><a class="external-link dropdown-item" href="https://tilburgnetworkgroup.github.io/remify/">remify</a></li>
    <li><a class="external-link dropdown-item" href="https://tilburgnetworkgroup.github.io/remstimate/">remstimate</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/TilburgNetworkGroup/remulate">remulate</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/TilburgNetworkGroup/bremory">bremory</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/TilburgNetworkGroup/remx">remx</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TilburgNetworkGroup/remverse">remverse</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/TiUNetworkGroup"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TilburgNetworkGroup/remstats"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>tomstats</h1>
      <small class="dont-index">Source: <a href="https://github.com/TilburgNetworkGroup/remstats/blob/master/R/tomstats.R" class="external-link"><code>R/tomstats.R</code></a></small>
      <div class="d-none name"><code>tomstats.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes statistics for modeling relational event history data
with the tie-oriented relational event model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tomstats</span><span class="op">(</span></span>
<span>  <span class="va">effects</span>,</span>
<span>  <span class="va">reh</span>,</span>
<span>  attr_actors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  attr_dyads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pt"</span>, <span class="st">"pe"</span><span class="op">)</span>,</span>
<span>  memory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"full"</span>, <span class="st">"window"</span>, <span class="st">"decay"</span>, <span class="st">"interval"</span><span class="op">)</span>,</span>
<span>  memory_value <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  stop <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  display_progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  adjmat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  get_adjmat <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">attr_data</span>,</span>
<span>  <span class="va">attributes</span>,</span>
<span>  <span class="va">edgelist</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-effects">effects<a class="anchor" aria-label="anchor" href="#arg-effects"></a></dt>
<dd><p>an object of class <code>"<a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a>"</code> (or one
that can be coerced to that class): a symbolic description of the effects in
the model for which statistics are computed, see 'Details' for the available
effects and their corresponding statistics</p></dd>


<dt id="arg-reh">reh<a class="anchor" aria-label="anchor" href="#arg-reh"></a></dt>
<dd><p>an object of class <code>"<a href="https://rdrr.io/pkg/remify/man/remify.html" class="external-link">remify</a>"</code> characterizing
the relational event history.</p></dd>


<dt id="arg-attr-actors">attr_actors<a class="anchor" aria-label="anchor" href="#arg-attr-actors"></a></dt>
<dd><p>optionally, an object of class
<code>"<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a>"</code> that contains exogenous attributes for
actors (see Details).</p></dd>


<dt id="arg-attr-dyads">attr_dyads<a class="anchor" aria-label="anchor" href="#arg-attr-dyads"></a></dt>
<dd><p>optionally, an object of class <code>data.frame</code> or
<code>matrix</code> containing attribute information for dyads (see Details).</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Specifies the method for managing simultaneous events, i.e.,
events occurring at the same time. The default 'method' is 'pt' (per
timepoint), where statistics are computed once for each unique timepoint in
the edgelist. Alternatively, you can choose 'pe' (per event), where
statistics are computed once for each unique event observed in the edgelist.</p></dd>


<dt id="arg-memory">memory<a class="anchor" aria-label="anchor" href="#arg-memory"></a></dt>
<dd><p>The memory to be used. See `Details'.</p></dd>


<dt id="arg-memory-value">memory_value<a class="anchor" aria-label="anchor" href="#arg-memory-value"></a></dt>
<dd><p>Numeric value indicating the memory parameter. See
`Details'.</p></dd>


<dt id="arg-start">start<a class="anchor" aria-label="anchor" href="#arg-start"></a></dt>
<dd><p>an optional integer value, specifying the index of the first
time or event in the relational event history for which statistics must be
computed (see 'Details')</p></dd>


<dt id="arg-stop">stop<a class="anchor" aria-label="anchor" href="#arg-stop"></a></dt>
<dd><p>an optional integer value, specifying the index of the last
time or event in the relational event history for which statistics must be
computed (see 'Details')</p></dd>


<dt id="arg-display-progress">display_progress<a class="anchor" aria-label="anchor" href="#arg-display-progress"></a></dt>
<dd><p>should a progress bar for the computation of the
endogenous statistics be shown (TRUE) or not (FALSE)?</p></dd>


<dt id="arg-adjmat">adjmat<a class="anchor" aria-label="anchor" href="#arg-adjmat"></a></dt>
<dd><p>optionally, a previously computed adjacency matrix with on the
rows the time points and on the columns the risk set entries</p></dd>


<dt id="arg-get-adjmat">get_adjmat<a class="anchor" aria-label="anchor" href="#arg-get-adjmat"></a></dt>
<dd><p>whether the adjmat computed by tomstats should be
outputted as an attribute of the statistics.</p></dd>


<dt id="arg-attr-data">attr_data<a class="anchor" aria-label="anchor" href="#arg-attr-data"></a></dt>
<dd><p>deprecated, please use "attr_actors" instead</p></dd>


<dt id="arg-attributes">attributes<a class="anchor" aria-label="anchor" href="#arg-attributes"></a></dt>
<dd><p>deprecated, please use "attr_data" instead</p></dd>


<dt id="arg-edgelist">edgelist<a class="anchor" aria-label="anchor" href="#arg-edgelist"></a></dt>
<dd><p>deprecated, please use "reh" instead</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class 'tomstats'. Array with the computed statistics,
where rows refer to time points, columns refer to potential relational event
(i.e., potential edges) in the risk set and slices refer to statistics. The
'tomstats' object has the following attributes:</p><dl><dt><code>model</code></dt>
<dd><p>Type of model that is estimated.</p></dd>

    <dt><code>formula</code></dt>
<dd><p>Model formula, obtained from the formula inputted to 'tie_effects'.</p></dd>

    <dt><code>riskset</code></dt>
<dd><p>The risk set used to construct the statistics.</p></dd>

    <dt><code>adjmat</code></dt>
<dd><p>[Optional], if "get_adjmat = TRUE", the matrix with the accumulated event weights for each time point (on the rows) and each dyad (in the columns).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="effects">Effects<a class="anchor" aria-label="anchor" href="#effects"></a></h2>


<p>The statistics to be computed are defined symbolically and should be
supplied to the <code>effects</code> argument in the form <code>~ effects</code>. The
terms are separated by + operators. For example:
<code>effects = ~ inertia() + otp()</code>. Interactions between two effects
can be included with * operators. For example:
<code>effects = ~ inertia()*otp()</code>. A list of available effects can be
obtained with <code><a href="tie_effects.html">tie_effects</a>()</code>.</p>
<p>The majority of the statistics can be scaled in some way, see
the documentation of the <code>scaling</code> argument in the separate effect
functions for more information on this.</p>
<p>The majority of the statistics can account for the event type
included as a dependent variable, see the documentation of the
<code>consider_type</code> argument in the separate effect functions for more
information on this.</p>
<p>Note that events in the relational event history can be directed or
undirected. Some statistics are only defined for either directed or
undirected events (see the documentation of the statistics). Note that
undirected events are only available for the tie-oriented model.</p>
    </div>
    <div class="section level2">
    <h2 id="attr-actors">attr_actors<a class="anchor" aria-label="anchor" href="#attr-actors"></a></h2>


<p>For the computation of the <em>exogenous</em> statistics an attributes object
with the exogenous covariate information has to be supplied to the
<code>attr_actors</code> argument in either <code><a href="remstats.html">remstats()</a></code> or in the separate
effect functions supplied to the <code>..._effects</code> arguments (e.g., see
<code><a href="send.html">send</a></code>). This <code>attr_actors</code> object should be constructed as
follows: A dataframe with rows referring to the attribute value of actor
<em>i</em> at timepoint <em>t</em>. A `name` column is required that contains the
actor name (corresponding to the actor names in the relational event
history). A `time` column is required that contains the time when attributes
change (set to zero if none of the attributes vary over time). Subsequent
columns contain the attributes that are called in the specifications of
exogenous statistics (column name corresponding to the string supplied to
the <code>variable</code> argument in the effect function). Note that the
procedure for the exogenous effects `tie' and `event' deviates from this,
here the exogenous covariate information has to be specified in a different
way, see <code><a href="tie.html">tie</a></code> and <code><a href="event.html">event</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="attr-dyads">attr_dyads<a class="anchor" aria-label="anchor" href="#attr-dyads"></a></h2>


<p>For the computation of the <em>dyad exogenous</em> statistics with <code><a href="tie.html">tie()</a></code>, an attributes object with the exogenous covariates information per dyad has to be supplied. This is a <code>data.frame</code> or <code>matrix</code> containing attribute information for dyads. If <code>attr_dyads</code> is a <code>data.frame</code>, the first two columns should represent "actor1" and "actor2" (for directed events, "actor1" corresponds to the sender, and "actor2" corresponds to the receiver). Additional columns can represent dyads' exogenous attributes. If attributes vary over time, include a column named "time". If <code>attr_dyads</code> is a <code>matrix</code>, the rows correspond to "actor1", columns to "actor2", and cells contain dyads' exogenous attributes.</p>
    </div>
    <div class="section level2">
    <h2 id="memory">Memory<a class="anchor" aria-label="anchor" href="#memory"></a></h2>


<p>The default `memory` setting is `"full"`, which implies that at each time
point $t$ the entire event history before $t$ is included in the computation
of the statistics. Alternatively, when `memory` is set to `"window"`, only
the past event history within a given time window is considered (see
Mulders &amp; Leenders, 2019). This length of this time window is set by the
`memory_value` parameter. For example, when `memory_value = 100` and `memory
= "window"`, at time point $t$ only the past events that happened at most
100 time units ago are included in the computation of the statistics.
A third option is to set `memory` to `"interval"`. In this case, the past
event history within a given time interval is considered. For example, when
`"memory_value" = c(50, 100)` and `memory = "window"`, at time point $t$
only the past events that happened between 50 and 100 time units ago are
included in the computation of the statistics. Finally, the fourth option is
to set `memory` to `"decay"`. In this case, the weight of the past event in
the computation of the statistics depend on the elapsed time between $t$ and
the past event. This weight is determined based on an exponential decay
function with half-life parameter `memory_value` (see Brandes et al., 2009).</p>
    </div>
    <div class="section level2">
    <h2 id="event-weights">Event weights<a class="anchor" aria-label="anchor" href="#event-weights"></a></h2>


<p>Note that if the relational event history contains a column that is named
“weight”, it is assumed that these affect the endogenous statistics. These
affect the computation of all endogenous statistics with a few exceptions
that follow logically from their definition (e.g., the recenyContinue
statistic does depend on time since the event and not on event weights).</p>
    </div>
    <div class="section level2">
    <h2 id="subset-the-event-history-using-start-and-stop-">Subset the event history using 'start' and 'stop'<a class="anchor" aria-label="anchor" href="#subset-the-event-history-using-start-and-stop-"></a></h2>


<p>It is possible to compute statistics for a segment of the relational event
sequence, based on the entire event history. This is done by specifying the
'start' and 'stop' values as the indices for the first and last event times
for which statistics are needed. For instance, setting 'start = 5' and 'stop
= 5' calculates statistics for the 5th event in the relational event
sequence, considering events 1-4 in the history. Note that in cases of
simultaneous events with the 'method' set to 'pt' (per timepoint), 'start'
and 'stop' should correspond to the indices of the first and last
<em>unique</em> event timepoints for which statistics are needed. For example,
if 'start = 5' and 'stop = 5', statistics are computed for the 5th unique
timepoint in the relational event sequence, considering all events occurring
at unique timepoints 1-4.</p>
    </div>
    <div class="section level2">
    <h2 id="adjacency-matrix">Adjacency matrix<a class="anchor" aria-label="anchor" href="#adjacency-matrix"></a></h2>


<p>Optionally, a previously computed adjacency matrix can be supplied. Note
that the endogenous statistics will be computed based on this adjacency
matrix. Hence, supplying a previously computed adjacency matrix can reduce
computation time but the user should be absolutely sure the adjacency matrix
is accurate.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Butts, C. T. (2008). A relational event framework for social
action. Sociological Methodology, 38(1), 155–200.
<a href="https://doi.org/10.1111/j.1467-9531.2008.00203.x" class="external-link">doi:10.1111/j.1467-9531.2008.00203.x</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tilburgnetworkgroup.github.io/remstats/">remstats</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">history</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">info</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare data</span></span></span>
<span class="r-in"><span><span class="va">reh</span> <span class="op">&lt;-</span> <span class="fu">remify</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/remify/man/remify.html" class="external-link">remify</a></span><span class="op">(</span>edgelist <span class="op">=</span> <span class="va">history</span>, model <span class="op">=</span> <span class="st">"tie"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute effects</span></span></span>
<span class="r-in"><span><span class="va">effects</span> <span class="op">&lt;-</span> <span class="op">~</span> <span class="fu"><a href="inertia.html">inertia</a></span><span class="op">(</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="send.html">send</a></span><span class="op">(</span><span class="st">"extraversion"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="otp.html">otp</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tomstats</span><span class="op">(</span><span class="va">effects</span>, reh <span class="op">=</span> <span class="va">reh</span>, attr_actors <span class="op">=</span> <span class="va">info</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Relational Event Network Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; Model: tie-oriented</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; Computation method: per time point</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; Dimensions: 115 time points x 90 dyads x 5 statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt; Statistics:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 &gt;&gt; 1: baseline</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 &gt;&gt; 2: inertia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 &gt;&gt; 3: send_extraversion</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 &gt;&gt; 4: otp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 &gt;&gt; 5: inertia:send_extraversion</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Giuseppe Arena, Marlyne Meijerink-Bosman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

